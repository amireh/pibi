<% content_for :title do %> Notifications | <%= current_user.name %> | <%= AppName %> <% end %>

<%= partial "/users/settings/_nav" %>

<section class="blocky">
  <h2 class="blocky_heading">Notifications</h2>
  <strong>Pending Notifications</strong>
  <ol>
  <% current_user.notices({status: :pending}).each do |n| %>
    <li>
      <% if n.type == 'email' %>
        Your email address is not yet verified.
        Please check your email, or visit <a href="/settings/account">this page</a> for more info.
      <% elsif n.type == 'password' %>
        You have an auto-generated password.
        Please check your email to get the code, and visit <a href="/settings/account">
        this page</a> to change it.
      <% end %>
    </li>
  <% end %>
  </ol>

  <% accepted_notices = current_user.notices({ :status.not => :pending }) %>
  <% unless accepted_notices.empty? %>
    <strong>Accepted Notifications</strong>
    <ol>
    <% accepted_notices.each do |n| %>
      <li>
        <% if n.type == 'password' %>
        An auto-generated password notice was sent on
        <% elsif n.type == 'email' %>
        An email verification notice was sent on
        <% end %>
        <%= n.created_at.strftime("%D") %>
      </li>
    <% end %>
    </ol>
  <% end %>
</section>