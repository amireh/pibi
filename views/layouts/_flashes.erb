<% if !flash.empty? %>
  <% content_for :deferred_js do %>
    <script>
      $(function() {
        $("#flashes button").click(function() { $(this).parent().hide(); });
      });
    </script>
  <% end %>

  <div id="flashes">
    <% if flash.size > 1 then %>
      <ol>
        <% flash.each_pair do |ctx,msg| %>
          <li class="flash <%= ctx %>"><%= msg %></li>
        <% end %>
      </ol>
    <% else %>
      <% flash.each_pair do |ctx,msg| %>
        <span class="flash <%= ctx %>"><%= msg %></span>
      <% end %>
    <% end %>
    <button>&times;</button>
  </div>
<% end %>